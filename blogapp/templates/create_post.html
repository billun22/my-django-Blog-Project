{% extends "base.html" %}

{% block content %}
<div class="create-container ">
    <h2>Create New Post</h2>

    <div>
        <form method="post" enctype="multipart/form-data" class="create-form">

            {% csrf_token %}
            {{ form.as_p }}

            <!-- Preview container -->
            <div style="margin-top:10px;">
                <img id="preview" src="#" alt="Image preview" style="max-width: 300px; display: none; border: 1px solid #ddd; padding: 5px;">
            </div>


            <div>
                <button type="submit" class="btn btn-primary">Save Post</button>
                <a href="{% url 'index' %}" class="btn btn-secondary">Cancel</a>
            </div>

        </form>
    </div>
    
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
    let input = document.getElementById("id_image");
    let preview = document.getElementById("preview");

    if (input) {
        input.addEventListener("change", function (event) {
            let file = event.target.files[0];
            if (file) {
                let reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = "block";
                };
                reader.readAsDataURL(file);
            }
        });
    }
});
</script>

{% endblock %}